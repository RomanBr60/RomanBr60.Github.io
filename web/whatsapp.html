<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN" "http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="he">
	<head>
		<meta charset="UTF-8">
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width">
		<meta name="generator" content="slidify" />
		<meta name="google" content="notranslate">
		<meta name="format-detection" content="telephone=טקד"/>

		<meta name="description" content="שליחת הודעת ווטסאפ למספר טלפון" />
		<meta name="author" content="רומן ברברמן" />

		<meta name="og:description" content="שליחת הודעת ווטסאפ למספר טלפון"/>
		<meta name="og:url" content="RomanBr60.github.io/web/whatsapp.html"/>
		<meta name="og:title" content="WhatsApp"/>
		<meta name="og:image" content="https://www.whatsapp.com/img/whatsapp-promo.png"/>		
		
		<link rel="shortcut icon" href="https://web.whatsapp.com/img/favicon/1x/favicon.png" type="image/png" />
		<link rel="apple-touch-icon" sizes="194x194" href="https://web.whatsapp.com/apple-touch-icon.png" type="image/png" />

		
		<title>וואטסאפ</title>
		<link href='https://fonts.googleapis.com/css?family=Lato:400,300,100' rel='stylesheet' type='text/css'>
		<!--<link href="https://fonts.googleapis.com/css?family=Roboto:400,300,100" rel="stylesheet" type="text/css">-->

		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<script>
		/*var str = "file:///C:/ProgFiles/Roman/XML/GitHub/Whatsapp/whatsapp.html";
		var decode = btoa(str);
		alert (decode + `\n` + atob(decode));*/
		
		function detect_platform() { 
			return ( navigator.userAgent.match(/Android/i)
				|| navigator.userAgent.match(/webOS/i)
				|| navigator.userAgent.match(/iPhone/i)
				|| navigator.userAgent.match(/iPad/i)
				|| navigator.userAgent.match(/iPod/i)
				|| navigator.userAgent.match(/BlackBerry/i)
				|| navigator.userAgent.match(/Windows Phone/i)
			) ? true : false;
		}
		
		function getNum() {
			//alert ($("#number").val().trim());
			/*if ( ($("#number").val().trim()  == '') || ($("#country_code").val().trim()  == '') )
			{
				if ($("#number").val() == '')
					$("#numberX").attr('class', 'glyphicon glyphicon-remove form-control-feedback text-danger'); 
				
				if ($("#country_code").val() == '')
					$("#countryX").attr('class', 'glyphicon glyphicon-remove form-control-feedback text-danger'); 
				
				return '';
			}*/
			
			var num = parseInt($("#number").val().replace(/\D/g,'')) + '';
			num = $("#country_code").val().replace(/\D/g,'') + num;
			return num;
		}
		
		useWhatsapp = function () {
			var num = getNum();
			if (num == '') return;
			var txt = $("#txt").val();
			
			var url = detect_platform() ? 'api' : 'web';
			url = `https://${url}.whatsapp.com/send?phone=${num}&text=${txt}`;
			window.location.href = url;
		}
		
		useTel = function (func) {
			var num = getNum();
			if (num == '') return;

			var userName = $("#userName").val();
			var url;
			switch (func) {
				case "tel":  
					if (getNum == '') return;
					url = `tel:${num}`; break;
					
				case "skype1": 
					if (getNum == '') return;
					url = `skype:${num}?call`; break; 
					
				//case "skype1": url = "callto://" + `${num}`; break; 
				case "skype2": url = `skype:${userName}?call`; break; 
				case "skype3": url = `skype:${userName}?chat`; break; 
				//case "skype3": url = `skype:${userName}`; break; 
			}
			
			window.location.href = url;
		}
		</script>
		<style>
		@import url(https://fonts.googleapis.com/css?family=Roboto:400,300,600,400italic);
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
			-webkit-box-sizing: border-box;
			-moz-box-sizing: border-box;
			-webkit-font-smoothing: antialiased;
			-moz-font-smoothing: antialiased;
			-o-font-smoothing: antialiased;
			font-smoothing: antialiased;
			text-rendering: optimizeLegibility;
			text-align: center; 
		}
		
		body{
			box-sizing: border-box;
			background-color: #4CAF50;

			font-family: "Roboto", Helvetica, Arial, sans-serif;
			font-weight: 100;
			color: #777;
		}

		.panel { 
			/*box-shadow: 5px 10px 15px #666666;*/
			/*box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);			*/
			box-shadow: 0 0 30px black;
			background-color: #F9F9F9;
			margin-top: 15%;
		}

		.heading { 
			text-shadow: -1px -1px 0 black;
			color: silver;
			letter-spacing: 1px;
			/*text-decoration: underline; */
			font-weight: bold;
			text-align: right;
		}

		#country_code, #number, #txt, #userName {
			padding: 0 4px 0 4px;
			text-align: left;
			color: black;
			border: 0.5px solid #aaa;
		}

		#number, #country_code, #userName { direction: ltl; }

		#txt {
			width: 100%;
			height: 150px;
			padding: 4px 4px 4px 4px;
			text-align: right;
			direction: rtl;
		}
		
		.heading, div { 
			margin-bottom: 0px; 
			padding-bottom: 3px;
		}
		
		.btn { text-align: center; width: 49.5%; }
		
		#country_code { width: 34%; margin-right: 2%;}
		#number { width: 64%; }
		#userName { width: 100%;}

		.panel-heading {
			background-color: #ff0000; 
			color: #fff; 
		}

		#heading-title > #title {
			text-shadow: 1px 1px .5px black;
			font-size: 23px;
			margin: 0;
			padding: 0;
		}

		/*#heading-title > #subtitle {
			font-weight: 400 bold;
			margin: 0;
			padding: 0;
		)*/
		
		.alert { direction: ltl; }
		</style>
	
	</head>
	<body>
		<div class="container">
			<div class="col-lg-4 col-md-4 col-xs-6 col-lg-offset-4 col-md-offset-4 col-xs-offset-3">
				<div class="panel panel-danger">
					
					<div class="panel-heading">
						<div id="heading-title">
							<h3 id = "title" style="">פתיחת איש קשר בווטסאפ/סקייפ</h3>
						</div>
					</div>
					<div class="panel-body">
						<!--<div class="alert alert-danger" role="alert">
							<span class="sr-only">Error:</span>הכנס מספר טלפון תקין
							<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="false"></span>
						</div>-->

						<div  class="input-group">
							<h4 class="heading">מספר טלפון לשליחת ההודעה</h4>
							<div class = "input-group has-error has-feedback">
								<input type="text" class="form-control input-sm" id="country_code" maxlength = "7" value="+972" placeholder="קידומת מדינה"
								onchange = "changeX('countryX')"/>
								<span class="sr-only" aria-hidden="true" id="countryX"></span>
								
								<input type="text" class="form-control input-sm" id="number" placeholder="הקלד מספר" maxlength = "15" 
								onchange = "changeX('numberX')"/>
								<span class="sr-only" aria-hidden="true" id="numberX"></span>
							</div>
						</div>
						<div>
							<h4 class="heading">שם משתמש של סקייפ</h4>
							<input type="text" class="form-control input-sm" id="userName" placeholder="שם משתמש"/>
						</div>
						<div>
							<h4 class="heading">תוכן ההודעה לפני שליחה</h4>
							<textarea id="txt" placeholder="הקלד הודעה"></textarea>
						</div>
						<div>
							<a type="button" class="btn btn-primary btn-sm" onclick="useWhatsapp()" role = "button">פתח הודעת ווטסאפ</a>
							<a type="button" class="btn btn-primary btn-sm" onclick="useTel('tel')" role = "button">להתקשר למספר</a>
						</div>
						<div>
							<a type="button" class="btn btn-primary btn-sm" onclick="useTel('skype2');" role = "button">שיחת סקייפ</a>
							<a type="button" class="btn btn-primary btn-sm" onclick="useTel('skype1');" role = "button">שיחת טלפון בסקייפ</a>
						</div>
						<div>
							<a type="button" class="btn btn-primary btn-sm" onclick="useTel('skype3');" role = "button">התכתבות בסקייפ</a>
						</div>
					</div>
				</div>
			</div>	
		</div>
	</body>
</html> 
